<div class="pagination">
    <!-- Page Window Size -->
    {% set page_window_size = 1 %}

    <!-- 
        Absolute First Page is the least possible page value. For checkpoint 
        it's 0 and for table it's 1. 
    -->
    {% if current_path == "/checkpoint" %}
        {% set absolute_first_page = 0 %}
    {% else %}
        {% set absolute_first_page = 1 %}
    {% endif %}

    <!-- Calculate Start Page -->
    {% if current_page - (page_window_size // 2) < 1 %}
        {% set start_page = absolute_first_page %}
    {% else %}
        {% set start_page = current_page - (page_window_size // 2) %}
    {% endif %}

    <!-- Calculate End Page -->
    {% if start_page + page_window_size - 1 > total_pages %}
        {% set end_page = total_pages %}
    {% else %}
        {% set end_page = start_page + page_window_size - 1 %}
    {% endif %}

    <!-- First Page Button -->
    <button
        class="pageButton arrow {% if current_page == absolute_first_page %}disabled{% endif %}"
        onclick="window.location.href='?p={{absolute_first_page}}'"
        {% if current_page == absolute_first_page %}disabled{% endif %}
    >
        «
    </button>

    <!-- Previous Page Button -->
    <button
        class="pageButton arrow {% if current_page == absolute_first_page %}disabled{% endif %}"
        onclick="window.location.href='?p={{ current_page - 1 }}'"
        {% if current_page == absolute_first_page %}disabled{% endif %}
    >
        ‹
    </button>

    <!-- Page Numbers -->
    {% for p in range(start_page, end_page + 1) %}
        {% if p == current_page %}
            <!-- Current Page Editable Input -->
            <input
                class="pageInput"
                value="{{ current_page }}"
                onblur="validatePageNumber(this.value, {{ total_pages }})"
                onkeydown="if (event.key === 'Enter') validatePageNumber(this.value, {{ total_pages }})"
            />
        {% else %}
            <button
                class="pageButton"
                onclick="window.location.href='?p={{ p }}'"
            >
                {{ p }}
            </button>
        {% endif %}
    {% endfor %}

    <!-- Next Page Button -->
    <button
        class="pageButton arrow {% if current_page == total_pages %}disabled{% endif %}"
        onclick="window.location.href='?p={{ current_page + 1 }}'"
        {% if current_page == total_pages %}disabled{% endif %}
    >
        ›
    </button>

    <!-- Last Page Button -->
    <button
        class="pageButton arrow {% if current_page == total_pages %}disabled{% endif %}"
        onclick="window.location.href='?p={{ total_pages }}'"
        {% if current_page == total_pages %}disabled{% endif %}
    >
        »
    </button>
    <div class="pageInfo">
        {{current_page}} of {{total_pages}}
    </div>
</div>